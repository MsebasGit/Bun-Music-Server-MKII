<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bun</title>
  <script src="/js/utilities.js"></script>
</head>
<body>
  <div class="search-container">
    <input type="text" id="searchInput" placeholder="Buscar álbumes por título o artista...">
    <button id="searchButton" class="btn btn-browse">
      <img src="/img/assets/search.png" alt="Search Icon" class="sidebar-icon">
      Buscar
    </button>
  </div>
  <section id="Todas-los-Albumes">
    <h1>Todos los Albumes</h1>
    <div class="card-container" id="Contenedor-Albumes">
      <!-- Los álbumes se insertarán aquí dinámicamente -->
    </div>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const cardColors = ['card-blue', 'card-green', 'card-yellow', 'card-red'];
        const albumTemplate = (album, index) => {
            const artist = album.artist_name ? `by ${album.artist_name}` : '';
            const colorClass = cardColors[index % cardColors.length];
            return `
                <div class="card ${colorClass}" data-album-id="${album.id_album}">
                    <a href="/albums/${album.id_album}/songs">
                        <img src="${album.cover_path}" alt="Cover art for ${album.name}">
                        <h3>${album.name}</h3>
                        <p>${artist}</p>
                    </a>
                </div>
            `;
        };

        const albumsContainerId = 'Contenedor-Albumes';
        const initialEndpoint = '/get/albums';
        const searchEndpoint = '/get/albums/search';
        const errorMessage = 'Error al cargar los álbumes.';

        // Cargar todos los álbumes inicialmente
        loadAndRenderGrid(initialEndpoint, albumsContainerId, albumTemplate, errorMessage);

        // Configurar la búsqueda
        setupSearch('searchInput', 'searchButton', albumsContainerId, searchEndpoint, initialEndpoint, albumTemplate, errorMessage);
    });
  </script>
</body>
</html>
