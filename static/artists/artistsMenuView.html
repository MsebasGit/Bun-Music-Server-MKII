<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bun</title>
  <link rel="stylesheet" href="/static/style.css">
  <script src="/js/utilities.js"></script>
</head>
<body>
  <div class="search-container">
    <input type="text" id="searchInput" placeholder="Buscar artistas por nombre...">
    <button id="searchButton" class="btn btn-browse">
      <img src="/img/assets/search.png" alt="Search Icon" class="sidebar-icon">
      Buscar
    </button>
  </div>
  <section id="All-Artists">
    <h1>Todos los Artistas</h1>
    <div class="card-container" id="Artists-Container">
      <!-- Los artistas se insertarán aquí dinámicamente -->
    </div>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const cardColors = ['card-blue', 'card-green', 'card-yellow', 'card-red'];
        const artistTemplate = (artist, index) => {
            const colorClass = cardColors[index % cardColors.length];
            return `
                <div class="card ${colorClass}" data-artist-id="${artist.id_artist}">
                    <a href="/artists/${artist.id_artist}/songs">
                        <h3>${artist.name}</h3>
                        <p>${artist.biography}</p>
                    </a>
                </div>
            `;
        };

        const artistsContainerId = 'Artists-Container';
        const initialEndpoint = '/get/artists';
        const searchEndpoint = '/get/artists/search';
        const errorMessage = 'Error al cargar los artistas.';

        // Cargar todos los artistas inicialmente
        loadAndRenderGrid(initialEndpoint, artistsContainerId, artistTemplate, errorMessage);

        // Configurar la búsqueda
        setupSearch('searchInput', 'searchButton', artistsContainerId, searchEndpoint, initialEndpoint, artistTemplate, errorMessage);
    });
  </script>
</body>
</html>